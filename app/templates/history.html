{% extends 'base.html' %}
{% block title %}History | Crop Advisory DSS{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="h3 fw-bold mb-0">Advisory History</h2>
  <a href="{{ url_for('advisory') }}" class="btn btn-success">New Recommendation</a>
</div>

{% if items %}
  <div class="card border-0 shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Date</th>
            <th>Location</th>
            <th>Recommended Crop</th>
            <th>Confidence</th>
            <th>Weather Summary</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.created_at.split('T')[0] }}</td>
            <td>{{ item.location }}</td>
            <td><span class="fw-semibold text-success">{{ item.crop|title }}</span></td>
            <td>{{ (item.confidence * 100)|round(1) if item.confidence is not none else 'N/A' }}%</td>
            <td>{{ item.temperature }}Â°C, {{ item.rainfall }}mm, {{ item.humidity }}%</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% else %}
  <div class="alert alert-info">No advisory records yet. Create your first recommendation.</div>
{% endif %}
{% endblock %}
